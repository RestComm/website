<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">











<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>Mobicents Sip Servlets - </title>
    <link rel="stylesheet" href="./maven-mobicents-style.css" type="text/css">
    <meta name="author" content="Luka Cvrk (www.solucija.com)">
        <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
      </head>
<body>
<script src="http://www.google-analytics.com/urchin.js"
	type="text/javascript">
	</script>

<script type="text/javascript">
	_uacct = "UA-212380-1";
	urchinTracker();
	</script>

<div class="content">
<div class="header">
<div class="top_info">
<div class="top_info_right"><!-- Search Google -->
<form method="get" action="http://www.google.com/custom" target="_top">

Search
<input name="q" maxlength="255" value="" type="text">
<input name="client" value="pub-5437763180786254" type="hidden">
<input name="forid" value="1" type="hidden">
<input name="channel" value="5452007684" type="hidden">
<input name="ie" value="ISO-8859-1" type="hidden">
<input name="oe" value="ISO-8859-1" type="hidden">
<input name="cof"
	value="GALT:#008000;GL:1;DIV:#336699;VLC:663399;AH:center;BGC:FFFFFF;LBGC:336699;ALC:0000FF;LC:0000FF;T:000000;GFNT:0000FF;GIMP:0000FF;FORID:1;"
	type="hidden">
<input name="hl" value="en" type="hidden">
<input name="q" value="mobicents" type="hidden">
</form>


</div>
<div class="top_info_left">The Open Source SLEE and SIP Server</div>
</div>

<div id="logo">
<h1><a href="http://www.mobicents.org/"
	title="Mobicents">Mobicents</a></h1>
</div>
</div>

<div
	class="bar">
	<ul>
		<li
			class="browse_category">Select Category:</li>
		<li>
			<a
				href="index.html"
				accesskey="h">Home</a>

		</li>
		<li
			class="active">
			<a
				href="products.html"
				accesskey="p">Products</a>
		</li>
		<li>
			<a
				href="services.html"
				accesskey="s">Services</a>
		</li>
		<li>

			<a
				href="community.html"
				accesskey="c">Community</a>
		</li>
		<li>
			<a
				href="partners.html"
				accesskey="r">Partners</a>
		</li>
		<li>
			<a
				href="faq.html"
				accesskey="c">FAQ</a>

		</li>
		<li><a href="http://www.mobicents.org/incubator.html" accesskey="i">Incubator</a></li>
		<li>
			<a
				href="about.html"
				accesskey="a">About Us</a>
		</li>
	</ul>
</div>

<div class="contentwrapper"><div class="left">
<h3 id="h3_2">Mobicents Sip Servlets</h3>
<div class="section"><h2>Presence Client Example</h2>
<div class="section"><h3>Service Description</h3>
<p>When receiving an INVITE request, the application will call out to the Mobicents SIP Presence Service to check if the from address is a blocked contact. If that's the case it sends out a FORBIDDEN in response and the processing stops.</p>
<img src="./mss-presence-client-example-fail.png" /><p>If that's not the case it proxies the INVITE to the nex application in chain.</p>
<img src="./mss-presence-client-example-success.png" /><p>All configuration is taken from the sip.xml and used in the application to contact the XDMS for doing the user provisionning on application startup (create user and initial resource list creation) and then retrieving is the user taken from the From Header of the SIP INVITE is present in the blocked contacts of the user. </p>
<p>In a real world application, the users in the XDMS will be provisionned externally and the To Header of the SIP INVITE will be used to get the blocked list instead of using the default user from the sip.xml </p>
<p>This example is used in conjunction with the <a href="./location_service.html">location service example</a>
 as well to proxy the response to the correct location if the call is not blocked</p>
</div>
<div class="section"><h3>How to activate it</h3>
<div class="section"><h4>From the binary</h4>
<p>You can find the war files corresponding to this example <a href="https://repository.jboss.org/nexus/content/groups/public/org/mobicents/servlet/sip/example/call-blocking-presence/1.6.0.FINAL/call-blocking-presence-1.6.0.FINAL.war" class="externalLink">here</a>
 and <a href="https://repository.jboss.org/nexus/content/groups/public/org/mobicents/servlet/sip/example/location-service/1.6.0.FINAL/location-service-1.6.0.FINAL.war" class="externalLink">here</a>
.<br />
Drop the downloaded war files into your <tt>jboss_home/server/default/deploy</tt>
 directory </p>
<p>Get the corresponding <a href="/presence-client-example-dar.properties">dar configuration file</a>
.&#160; To understand what the dar configuration file is used for, check the <a href="./mss-dar.html">Application Router Documentation</a>
.<br />
Drop it in your <tt>jboss_home/server/default/conf/dars</tt>
 directory.<br />
To use this dar file for this service, specify in the Service xml tag, darConfigurationFileLocation attribute of the <tt>jboss_home/server/default/deploy/jboss-web.deployer/server.xml</tt>
, the following :<br />
<tt>conf/dars/presence-client-example-dar.properties</tt>
 </p>
<p>You can now run your container (Mobicents Sip Servlets on JBoss).</p>
</div>
<div class="section"><h4>From the source</h4>
<p>Please check out the call-blocking example located under this <a href="http://code.google.com/p/mobicents/source/browse/trunk/servers/sip-servlets/sip-servlets-examples/presence-client-example" class="externalLink">location</a>
 from the svn repository. </p>
</div>
</div>
<div class="section"><h3>How to play with it</h3>
<p>Download the <a href="http://sourceforge.net/projects/mobicents/files/Mobicents%20SIP%20Presence%20Service/1.0.0.BETA6/mobicents-sip-presence-1.0.0.BETA6.zip/download" class="externalLink">lastest version of the Mobicents SIP Presence XDMS Server</a>
 Extract it locally to a directory that we will reference as $MOBICENTS_PRESENCE_XDMS</p>
<p>Start it with the following command <tt>sh $MOBICENTS_PRESENCE_XDMS/bin/run.sh -Djboss.service.binding.set=ports-01</tt>
 </p>
<p>When the Mobicents XDMS Server is completely started, start Mobicents Sip Servlets with <tt>sh $MOBICENTS_SIP_SERVLETS/bin/run.sh</tt>
 </p>
<p>Start a SIP Phone of your choice such as the account name should be sip:blocked-sender@sip-servlets.com or sip:darth-vader@mobicents.org. The From Header should be one of the following addresses : sip:blocked-sender@sip-servlets.com or sip:darth-vader@mobicents.org.</p>
<p>Start another SIP Phone of your choice as the account name is sip:receiver@sip-servlets.com (as in the <a href="./location_service.html">location service example</a>
) on port 5090</p>
<p>The SIP phone doesn't have to be registered.</p>
<p>Make a call to sip:receiver@sip-servlets.com address, you should receive a Forbidden.</p>
<p>If you change the account name of the first SIP Phone the call will go through</p>
</div>
</div>

</div>

<div class="right">
<h3>Mobicents Sip Servlets</h3>
<div class="right_articles">
          <h5>Overview</h5>
            <ul>
              
    <li class="none">
                    <a href="http://code.google.com/p/sipservlets/" class="externalLink">Introduction</a>
          </li>
              
    <li class="none">
                    <a href="http://code.google.com/p/sipservlets/wiki/Downloads" class="externalLink">Downloads</a>
          </li>
              
    <li class="none">
                    <a href="http://goo.gl/xmPp4" class="externalLink">Roadmap</a>
          </li>
          </ul>
              <h5>Documentation</h5>
            <ul>
              
    <li class="none">
                    <a href="http://code.google.com/p/sipservlets/wiki/Welcome?tm=6" class="externalLink">Community Documentation</a>
          </li>
          </ul>
      </div>
<div align="center">
<a href="http://www.jboss.org/jopr/"><img src="http://www.jboss.org/dms/jopr/images/managedbyjopr_badge_gold.png"/></a>
</div>
</div>
</div>
<div class="footer">   
  </div>
  <div id="footer">
    <div>
      <div align="center"><a href="http://www.redhat.com/"><img  src="logo_rh_home.png" alt=" Red Hat" border="0" height="31" width="96" /></a><br />
      </div>
    </div>
    <div align="center">&copy; 2008 Red Hat Middleware, LLC. All rights reserved. <a href="http://www.jboss.com/privacy_policy">Privacy Policy</a></div> </div>
</div>
  </body>
</html>
