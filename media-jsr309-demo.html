<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">











<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>Mobicents Sip Servlets - </title>
    <link rel="stylesheet" href="./maven-mobicents-style.css" type="text/css">
    <meta name="author" content="Luka Cvrk (www.solucija.com)">
        <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
      </head>
<body>
<script src="http://www.google-analytics.com/urchin.js"
	type="text/javascript">
	</script>

<script type="text/javascript">
	_uacct = "UA-212380-1";
	urchinTracker();
	</script>

<div class="content">
<div class="header">
<div class="top_info">
<div class="top_info_right"><!-- Search Google -->
<form method="get" action="http://www.google.com/custom" target="_top">

Search
<input name="q" maxlength="255" value="" type="text">
<input name="client" value="pub-5437763180786254" type="hidden">
<input name="forid" value="1" type="hidden">
<input name="channel" value="5452007684" type="hidden">
<input name="ie" value="ISO-8859-1" type="hidden">
<input name="oe" value="ISO-8859-1" type="hidden">
<input name="cof"
	value="GALT:#008000;GL:1;DIV:#336699;VLC:663399;AH:center;BGC:FFFFFF;LBGC:336699;ALC:0000FF;LC:0000FF;T:000000;GFNT:0000FF;GIMP:0000FF;FORID:1;"
	type="hidden">
<input name="hl" value="en" type="hidden">
<input name="q" value="mobicents" type="hidden">
</form>


</div>
<div class="top_info_left">The Open Source SLEE and SIP Server</div>
</div>

<div id="logo">
<h1><a href="http://www.mobicents.org-a.googlepages.com/"
	title="Mobicents">Mobicents</a></h1>
</div>
</div>

<div class="bar">
<ul>
	<li class="browse_category">Select Category:</li>

	<li><a href="index.html" accesskey="h">Home</a></li>
	<li class="active"><a href="products.html" accesskey="p">Products</a></li>
	<li><a href="services.html" accesskey="s">Services</a></li>

	<li><a href="community.html" accesskey="c">Community</a></li><li><a href="http://www.mobicents.org/calendar.html" accesskey="i">Calendar</a></li>
	<li><a href="faq.html" accesskey="c">FAQ</a></li><li><a href="incubator.html" accesskey="i">Incubator</a></li>

	<li><a href="about.html" accesskey="a">About Us</a></li>

</ul>
</div>
<div class="contentwrapper">
<div class="left">
<h3 id="h3_2">Mobicents Sip Servlets</h3>
<div class="section"><h2>Media JSR-309 Example</h2>
<div class="section"><h3>Service Description</h3>
<p>This simple example shows how Sip Servlets can leverage JSR-309 API which provides multimedia application developers with a generic media server (MS) abstraction interface. JSR-309 defines a programming model and object model for MS control independent of MS control protocols. Media Server Control API is not an API for a specific protocol. It will take advantage of the multiple and evolving Multimedia Server (MS) capabilities available in the industry today and also provide an abstraction for commonly used application functions like multi party conferencing, multimedia mixing and interaction dialogs. 
<br/>
</p>
<p>
<br/>
Some of the commonly used MS control protocols are MGCP (RFC 3435), MEGACO (RFC 3525), Media Server Markup Language (MSML) (RFC 4722) and VoiceXML.
</p>
<p>
<br/>
The Mobicents implementation of JSR-309 API makes use of MGCP as MS control protocol. Look at bellow diagram for further understanding of layers involved 

<br/>

<img src="SipJSR309.jpeg" alt="JSR-309 example image"  height="475" width="400"/>
</p>

<p>
In above diagram the Sip Phone (UA) interacts with Sip-Servlets Application deployed on Sip Servlets Server using the SIP messages and exchanges the SDP. The Sip Servlets Application uses JSR-309 API which leverages MGCP to talk to Mobicents Media Server. Once the hand-shake is done, the RTP flows between the UA and MMS.
<br/>
<br/>
This example demonstartes the Announcement, DTMF Detection and Recording capabilities of MMS. The example is divided in 2 parts. 
<br/>
<br/>
<b>Part I</b>
<br/>
<ol>
<li>Dial 1010 from you SIP Phone</li>
<li>You will hear an announcement (show casing the announcement capability)</li>
<li>Dial a DTMF from your SIP Phone, the DTMF is recognized by the media-jsr309-servlet example and MS is instructed to play corresponding Announcement (show casing the DTMF detection capability of MS)</li>
</ol>


<b>Part II</b>
<br/>
<ol>
<li>Dial 1011 from your SIP Phone</li>
<li>You will hear an announcement to start recording</li>
<li>Once announcement is over, speak on your mic and your voice gets recorded to Mobicents Media Server Home directory (showcasing recording capability). After few seconds you can disconnect and manually go to Mobicents Media Server home directory and play test.wav using your favorite player.</li>
</ol>
</p>

</div>
<div class="section"><h3>How to activate it</h3>
<div class="section"><h4>From the binary</h4>
<p>You can find the war file corresponding to this example <a href="http://repository.jboss.org/maven2/org/mobicents/servlet/sip/example/media-playback-servlet/1.3/media-playback-servlet-1.3.war" class="externalLink">here</a>
.<br />
Drop the downloaded war file into your <tt>jboss_home/server/default/deploy</tt>
 directory </p>
<p>Get the corresponding <a href="/media-playback-dar.properties">dar configuration file</a>
.<br />
To understand what the dar configuration file is used for, check the <a href="./mss-dar.html">Application Router Documentation</a>
.<br />
Drop it in your <tt>jboss_home/server/default/conf/dars</tt>
 directory.<br />
To use this dar file for this service, specify in the Service xml tag, darConfigurationFileLocation attribute of the <tt>jboss_home/server/default/deploy/jbossweb.sar/server.xml</tt>
, the following :<br />
<tt>conf/dars/media-playback-dar.properties</tt>
</p>
<p>You can now run your Jboss container.</p>
</div>
<div class="section"><h4>From the source</h4>
<p>Please check out the media-jsr309-servlet example located under this <a href="http://code.google.com/p/mobicents/source/browse/trunk/servers/sip-servlets/sip-servlets-examples/media-jsr309-servlet" class="externalLink">location</a> from the svn repository. Follow the instructions in the <a href="http://code.google.com/p/mobicents/source/browse/trunk/servers/sip-servlets/sip-servlets-examples/media-jsr309-servlet/README.TXT" class="externalLink">README.txt</a> to build and run the example. 
</p>
</div>
</div>
<div class="section"><h3>How to play with it</h3>
<p>First you need to have Mobicents Media Server (MMS) up and running if its standalone. If its embedded in JBoss AS, it starts when JBoss AS container starts. For further instruction on how to start MMS please look at doco TODO
<br/>
<br/>
Just dial the servlet directly as explained in below steps, without any proxy. Tested with Twinkle
<ol>
<li>Dial 1010 to test Announcement and DTMF Detection</li>
<li>Dial 1011 to test Recording</li>
</ol>
</p>
</div>
</div>

</div>

<div class="right">
<h3>Mobicents Sip Servlets</h3>
<div class="right_articles">
          <h5>Overview</h5>
            <ul>
              
    <li class="none">
                    <a href="products_sip_servlets.html">Introduction</a>
          </li>
              
    <li class="none">
                    <a href="mss-downloads.html">Downloads</a>
          </li>
              
    <li class="none">
                    <a href="http://ci.jboss.org/jenkins/job/Mobicents-Books/lastSuccessfulBuild/artifact/sip-servlets/index.html" class="externalLink">User Guide</a>
          </li>
              
                
              
      
            
      
            
      
              
        <li class="collapsed">
                    <a href="installation.html">Installation</a>
                </li>
              
    <li class="none">
                    <a href="configuration.html">Configuration</a>
          </li>
              
    <li class="none">
                    <a href="roadmap.html">Roadmap</a>
          </li>
              
    <li class="none">
                    <a href="license.html">License</a>
          </li>
              
    <li class="none">
                    <a href="qa.html">QA</a>
          </li>
          </ul>
              <h5>Application Router</h5>
            <ul>
              
    <li class="none">
                    <a href="mss-dar.html">Default Application Router</a>
          </li>
              
    <li class="none">
                    <a href="mss-dfc.html">ECharts DFC Application Router</a>
          </li>
          </ul>
              <h5>Examples</h5>
            <ul>
              
                
              
      
            
      
            
      
            
      
            
      
            
      
            
      
            
      
            
            
            
      
            
      
            
      
            
      
            
      
            
      
            
      
            
      
            
      
              
            <li class="expanded">
                    <a href="examples.html">Examples</a>
                  <ul>
                  
    <li class="none">
                    <a href="call_blocking.html">Call Blocking</a>
          </li>
                  
    <li class="none">
                    <a href="call_forwarding.html">Call Forwarding</a>
          </li>
                  
    <li class="none">
                    <a href="call_controller.html">Call Controller</a>
          </li>
                  
    <li class="none">
                    <a href="speed_dial.html">Speed Dial</a>
          </li>
                  
    <li class="none">
                    <a href="location_service.html">Location Service</a>
          </li>
                  
    <li class="none">
                    <a href="speeddial_locationservice.html">Speed Dial/Location Service</a>
          </li>
                  
    <li class="none">
                    <a href="click2call.html">Click to Call</a>
          </li>
                  
    <li class="none">
                    <a href="chatserver.html">Chat Server</a>
          </li>
                  
    <li class="none">
              <strong>Media Demo</strong>
        </li>
                  
    <li class="none">
                    <a href="shopping-demo.html">Shopping Demo</a>
          </li>
                  
    <li class="none">
                    <a href="jslee-sips-interop-demo.html">JSLEE/Sip Servlets Interop Demo</a>
          </li>
                  
    <li class="none">
                    <a href="facebook-c2c.html">Facebook Click To Call Plugin</a>
          </li>
                  
    <li class="none">
                    <a href="conference-demo.html">Conference Demo</a>
          </li>
                  
    <li class="none">
                    <a href="mss-ipbx.html">Media PBX</a>
          </li>
                  
    <li class="none">
                    <a href="diameter_event_charging.html">Diameter Event Charging</a>
          </li>
                  
    <li class="none">
                    <a href="mss-diameter_sh.html">Diameter Sh OpenIMS Integration</a>
          </li>
                  
    <li class="none">
                    <a href="mss-jruby-example.html">JRuby/Rails Sip Servlets Example</a>
          </li>
                  
    <li class="none">
                    <a href="mss-pure-jruby-telco.html">Pure JRuby/Rails Telco Example</a>
          </li>
              </ul>
        </li>
          </ul>
              <h5>Advanced Features</h5>
            <ul>
              
    <li class="none">
                    <a href="mss-sip-extensions.html">SIP Extensions</a>
          </li>
              
    <li class="none">
                    <a href="media.html">Media support</a>
          </li>
              
    <li class="none">
                    <a href="security.html">Security</a>
          </li>
              
    <li class="none">
                    <a href="stun.html">STUN suport</a>
          </li>
              
    <li class="none">
                    <a href="concurrency.html">Concurrency</a>
          </li>
              
    <li class="none">
                    <a href="mss-congestion.html">Congestion Control</a>
          </li>
              
    <li class="none">
                    <a href="mss-seam.html">JBoss Seam Integration</a>
          </li>
              
    <li class="none">
                    <a href="mobicents-sip-servlets-jslee-intero.html">JSLEE/Sip Servlets Interoperability</a>
          </li>
              
    <li class="none">
                    <a href="mss-jruby.html">JRuby-Rails Integration</a>
          </li>
              
    <li class="none">
                    <a href="mss-eclipse-tools.html">Eclipse Development Tools</a>
          </li>
          </ul>
              <h5>Other Protocols Support</h5>
            <ul>
              
                
              
      
            
      
              
        <li class="collapsed">
                    <a href="mss-diameter.html">Diameter</a>
                </li>
          </ul>
              <h5>IMS</h5>
            <ul>
              
    <li class="none">
                    <a href="mss-ims-integration.html">OpenIMS Core Integration</a>
          </li>
          </ul>
              <h5>Server Monitoring - Operations - Management</h5>
            <ul>
              
    <li class="none">
                    <a href="sip-servlets-managment.htm">Management Console</a>
          </li>
              
    <li class="none">
                    <a href="mss-jopr-plugin.html">Server Monitoring Jopr Integration</a>
          </li>
              
    <li class="none">
                    <a href="mss-jopr-lb-plugin.html">Sip Load Balancer Monitoring Jopr Integration</a>
          </li>
          </ul>
              <h5>High Availability</h5>
            <ul>
              
    <li class="none">
                    <a href="load-balancer.html">SIP Load Balancer</a>
          </li>
              
    <li class="none">
                    <a href="clustering.html">Clustering</a>
          </li>
              
    <li class="none">
                    <a href="failover.html">Failover</a>
          </li>
              
    <li class="none">
                    <a href="mss-ip-balancers.html">IP Load Balancing</a>
          </li>
          </ul>
              <h5>Contribute</h5>
            <ul>
              
    <li class="none">
                    <a href="contributor.html">How to Contribute</a>
          </li>
              
    <li class="none">
                    <a href="tests.html">Write a Test/Run the Testsuite</a>
          </li>
              
    <li class="none">
                    <a href="feedback.html">Feedback</a>
          </li>
              
    <li class="none">
                    <a href="source-repository.html">Source Repository</a>
          </li>
              
    <li class="none">
                    <a href="mss-ide-setup.html">Mobicents Sip Servlets in Eclipse</a>
          </li>
          </ul>
              <h5>Community</h5>
            <ul>
              
    <li class="none">
                    <a href="team-list.html">Project Team</a>
          </li>
              
    <li class="none">
                    <a href="acknowledgements.html">Acknowledgements</a>
          </li>
              
    <li class="none">
                    <a href="http://code.google.com/p/mobicents/issues/list?q=label%3Acomponent%20label%3Asip-servlets&can=2" class="externalLink">Issue Tracker</a>
          </li>
              
    <li class="none">
                    <a href="blogs.html">Project Blogs</a>
          </li>
              
    <li class="none">
                    <a href="http://forums.java.net/jive/forum.jspa?forumID=55" class="externalLink">User Forum</a>
          </li>
              
    <li class="none">
                    <a href="http://forums.java.net/jive/forum.jspa?forumID=54" class="externalLink">Develper Forum</a>
          </li>
              
    <li class="none">
                    <a href="https://sip-servlets.dev.java.net/" class="externalLink">Legacy Project site</a>
          </li>
          </ul>
      </div>
</div>
</div>
<div class="footer">
    <p><a href="https://mobicents.dev.java.net/servlets/ProjectNewsRSS">RSS Feed</a> | <a href="mailto:telco@redhat.com">Contact</a> | <a href="#">Products</a> | <a href="#">Disclaimer</a> | <a href="#">Privacy</a> <br />

    </p>
  </div>
  <div id="footer">
    <div>
      <div align="center"><a href="http://www.redhat.com/"><img src="logo_rh_home.png" alt=" Red Hat" border="0" height="31" width="96" /></a><br />
      </div>
    </div>
    <div align="center">&copy; 2008 Red Hat Middleware, LLC. All rights reserved. <a href="http://www.jboss.com/privacy_policy">Privacy Policy</a></div> </div>
</div>
  </body>
</html>
